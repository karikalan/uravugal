<!doctype html>
<html>
<head>
<title>Bar Chart</title>
<script src="../script/Chart.js"></script>

<script>
	function getTime() {
		alert("Inside getTime");
		var d = new Date();
		var n = d.getDate();
		alert(d);
		return d;
	}
</script>

</head>
<body>
	<div style="width: 50%">
		<canvas id="canvas" height="450" width="600"></canvas>
	</div>


	<script>
		var randomScalingFactor = function() {
			return Math.round(Math.random() * 100)
		};

		function getRandomColor() {
			var letters = '0123456789ABCDEF'.split('');
			var color = '#';
			for ( var i = 0; i < 6; i++) {
				color += letters[Math.floor(Math.random() * 16)];
			}
			return color;
		}

		var barChartData = {
			labels : [ "January", "February", "March", "April", "May", "June",
					"July" ],
			datasets : [
					{
						fillColor : getRandomColor(),
						strokeColor : getRandomColor(),
						highlightFill : getRandomColor(),
						highlightStroke : getRandomColor(),
						data : [ randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor(), 0, randomScalingFactor() ]
					},
					{
						fillColor : getRandomColor(),
						strokeColor : getRandomColor(),
						highlightFill : getRandomColor(),
						highlightStroke : getRandomColor(),
						data : [ randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor() ]
					},
					{
						fillColor : getRandomColor(),
						strokeColor : getRandomColor(),
						highlightFill : getRandomColor(),
						highlightStroke : getRandomColor(),
						data : [ randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor(), randomScalingFactor(),
								randomScalingFactor() ]
					} ]

		}

		barChartData = {
			"labels" : [ "January", "February" ],
			"datasets" : [ {
				"fillColor" : "rgba(220,220,220,0.2)",
				"strokeColor" : "rgba(220,220,220,1)",
				"pointColor" : "rgba(220,220,220,1)",
				"pointStrokeColor" : "#fff",
				"pointHighlightFill" : "#fff",
				"pointHighlightStroke" : "rgba(220,220,220,1)",
				"data" : [ 10.34, 15.45 ]
			}, {
				"fillColor" : "rgba(220,220,220,0.2)",
				"strokeColor" : "rgba(220,220,220,1)",
				"pointColor" : "rgba(220,220,220,1)",
				"pointStrokeColor" : "#fff",
				"pointHighlightFill" : "#fff",
				"pointHighlightStroke" : "rgba(220,220,220,1)",
				"data" : [ 4.34, 10.45 ]
			} ]
		};

		window.onload = function() {
			var ctx = document.getElementById("canvas").getContext("2d");
			alert(barChartData);
			window.myBar = new Chart(ctx).Bar(barChartData, {
				responsive : true
			});

		}
	</script>
	<a id='tfa_src_data'>Export</a>
	<script type="text/javascript">
		document.getElementById('tfa_src_data').onclick = function() {
			var csv = getTime();
			var csvData = 'data:application/octet-stream;charset=utf-8,'
					+ encodeURIComponent(csv);
			this.href = csvData;
			this.target = '_blank';
			this.download = 'filename.txt';
		};
	</script>
</body>
</html>
